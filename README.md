# サプノア（SUPNOA）- 検査結果ベースのサプリメント推奨システム

## プロジェクト概要

サプノアは、クリニックの自由診療収入向上を目的とした、血液検査・尿検査結果に基づく最適サプリメント提案Webアプリケーションです。

### 開発フェーズ
- **フェーズ1**: 検査データの取得・システム反映（将来実装）
- **フェーズ2**: 患者向け検査結果確認・サプリメント推奨システム ⭐ **現在開発対象**
- **フェーズ3**: 購入フロー・決済システム（将来拡張）

## 技術スタック

### フロントエンド
- Next.js 14 + TypeScript
- Tailwind CSS
- Recharts（グラフ・チャート）
- Lucide React（アイコン）
- React Hook Form

### バックエンド
- Node.js + Express.js
- TypeScript
- Prisma ORM
- PostgreSQL
- Redis（セッション管理）

### 認証・セキュリティ
- NextAuth.js
- bcrypt
- joi（バリデーション）

## プロジェクト構造

```
sapunoa/
├── src/
│   ├── app/                    # Next.js App Router
│   │   ├── (auth)/            # 認証関連ページ
│   │   ├── (patient)/         # 患者向けページ
│   │   ├── (doctor)/          # 医師向けページ
│   │   └── api/               # APIルート
│   ├── components/            # Reactコンポーネント
│   │   ├── patient/           # 患者向けコンポーネント
│   │   ├── doctor/            # 医師向けコンポーネント
│   │   └── shared/            # 共通コンポーネント
│   ├── lib/                   # ユーティリティ関数
│   ├── services/              # ビジネスロジック
│   ├── types/                 # TypeScript型定義
│   └── styles/                # グローバルスタイル
├── prisma/                    # Prismaスキーマ・マイグレーション
├── public/                    # 静的ファイル
└── tests/                     # テストファイル
```

## セットアップ

```bash
# 依存関係のインストール
npm install

# 環境変数の設定
cp .env.example .env.local

# データベースのセットアップ
npm run db:migrate

# 開発サーバーの起動
npm run dev
```

## 主要機能（フェーズ2）

### 患者向け機能
- ログイン（診察券番号またはメールアドレス）
- 検査結果の視覚的表示
  - レーダーチャート（栄養バランス）
  - ヒートマップ（栄養不足状態）
  - 人体図（身体部位との関連）
- パーソナライズされたサプリメント推奨
- 医師からのコメント表示

### 医師向け機能
- 患者管理
- 検査結果閲覧
- サプリメント推奨設定
- 医師コメント編集

### 検査結果解析
- 血液検査データの自動解析
- 栄養素不足の判定
- 最適なサプリメントのマッピング

## 開発ガイドライン

### コード規約
- TypeScriptの厳格な型定義
- ESLint + Prettierによるコードフォーマット
- コンポーネントの単一責任原則
- カスタムフックによるロジックの分離

### セキュリティ
- 医療データの暗号化
- セキュアなAPI通信（HTTPS）
- 適切なアクセス制御

### パフォーマンス
- Next.js Image Optimizationの活用
- 動的インポートによるコード分割
- キャッシュ戦略の実装

## ライセンス

Proprietary - All rights reserved